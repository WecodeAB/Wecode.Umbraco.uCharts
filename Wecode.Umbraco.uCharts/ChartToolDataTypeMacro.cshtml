@using umbraco.MacroEngines
@inherits DynamicNodeContext
@{
    var id = Guid.NewGuid();
    var chartToolId = "chart_div_" + id;
    var propertyName = Parameter.propertyName.ToString();
    var settings = (Model.GetProperty(propertyName) != null && Model.GetProperty(propertyName).Value != null) ? Html.Raw(Model.GetProperty(propertyName).Value) : null;
   
    if(settings != null)
    {
        <script type="text/javascript">
            $(function() {
                renderGoogleChart(
                    $.parseJSON('@settings'),
                    "@chartToolId"
                );
            });
        </script>
        <div id="@chartToolId" class="chart_div" style="width: 500px; height: 500px"></div>
    }


}